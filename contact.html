<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kontakt</title>
<style>
  body {
    font-family: "Inter", sans-serif;
    margin: 0;
    background: #f8fafc;
    color: #111;
  }

  /* Button zum Öffnen */
  .contact-btn {
    background: #2563eb;
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 8px;
    font-size: 1rem;
    cursor: pointer;
    transition: background 0.3s;
  }
  .contact-btn:hover {
    background: #1e40af;
  }

  /* Overlay */
  .modal-overlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.45);
    backdrop-filter: blur(4px);
    justify-content: center;
    align-items: center;
    z-index: 1000;
  }

  /* Popup-Fenster */
  .modal {
    background: white;
    border-radius: 16px;
    padding: 2rem;
    width: 90%;
    max-width: 480px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
    position: relative;
    animation: fadeIn 0.3s ease;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: scale(0.95); }
    to { opacity: 1; transform: scale(1); }
  }

  /* Schließen-Button */
  .close-btn {
    position: absolute;
    right: 16px;
    top: 12px;
    background: none;
    border: none;
    font-size: 1.4rem;
    cursor: pointer;
    color: #555;
  }

  label {
    font-weight: 500;
  }
  input, textarea {
    width: 100%;
    padding: 10px;
    margin-top: 4px;
    margin-bottom: 16px;
    border: 1px solid #ccc;
    border-radius: 8px;
    font-size: 1rem;
  }

  button[type="submit"] {
    background: #16a34a;
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 1rem;
    transition: background 0.3s;
  }
  button[type="submit"]:hover {
    background: #15803d;
  }

  #status {
    margin-top: 10px;
    font-size: 0.95rem;
  }

  small {
    font-size: 0.8rem;
    color: #555;
  }
</style>
</head>
<body>

<!-- Öffnen-Button -->
<button class="contact-btn" id="openModalBtn">Kontakt aufnehmen</button>

<!-- Popup-Fenster -->
<div class="modal-overlay" id="modalOverlay">
  <div class="modal">
    <button class="close-btn" id="closeModalBtn">&times;</button>

    <h2>Schreib uns eine Nachricht</h2>
    <form id="kontaktformular" action="https://api.web3forms.com/submit" method="POST">
      <input type="hidden" name="access_key" value="339f5f0f-11ab-4866-910c-269bdf1edd0f">
      <input type="hidden" name="subject" value="Neue Kontaktanfrage über Webseite">

      <label for="name">Name*</label>
      <input type="text" id="name" name="name" required>

      <label for="email">E-Mail*</label>
      <input type="email" id="email" name="email" required>

      <label for="nachricht">Nachricht*</label>
      <textarea id="nachricht" name="nachricht" rows="4" required></textarea>

      <div style="margin-bottom: 12px;">
        <input type="checkbox" id="consent" required>
        <label for="consent">
          Ich stimme zu, dass meine Angaben gespeichert und verarbeitet werden
          gemäß der <a href="/datenschutz.html" target="_blank">Datenschutzerklärung</a>.
        </label>
      </div>

      <button type="submit">Absenden</button>
      <p id="status"></p>
    </form>

    <small>Diese Nachricht wird sicher übertragen und nicht dauerhaft gespeichert.</small>
  </div>
</div>

<script>
const modal = document.getElementById("modalOverlay");
const openBtn = document.getElementById("openModalBtn");
const closeBtn = document.getElementById("closeModalBtn");

openBtn.addEventListener("click", () => modal.style.display = "flex");
closeBtn.addEventListener("click", () => modal.style.display = "none");
modal.addEventListener("click", (e) => {
  if (e.target === modal) modal.style.display = "none";
});

document.getElementById("kontaktformular").addEventListener("submit", async (e) => {
  e.preventDefault();
  const form = e.target;
  const consent = form.querySelector("#consent").checked;
  const status = document.getElementById("status");

  if (!consent) {
    status.textContent = "Bitte stimmen Sie der Datenverarbeitung zu.";
    return;
  }

  status.textContent = "Senden...";

  try {
    const formData = new FormData(form);
    const res = await fetch(form.action, {
      method: form.method,
      body: formData
    });

    if (res.ok) {
      status.textContent = "✅ Danke! Ihre Nachricht wurde gesendet.";
      form.reset();
      setTimeout(() => modal.style.display = "none", 1500);
    } else {
      status.textContent = "❌ Fehler beim Senden. Bitte später erneut versuchen.";
    }
  } catch {
    status.textContent = "⚠️ Netzwerkfehler. Bitte prüfen Sie Ihre Verbindung.";
  }
});
</script>

</body>
</html>
